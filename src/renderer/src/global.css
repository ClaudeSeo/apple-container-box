@import "tailwindcss";
@config "../../../tailwind.config.js";

@layer base {
  :root {
    /* Solid Dark Theme */
    --background: 0 0% 7%;
    --foreground: 0 0% 95%;
    --card: 0 0% 9%;
    --card-foreground: 0 0% 95%;
    --popover: 0 0% 12%;
    --popover-foreground: 0 0% 95%;
    --primary: 211 100% 50%;
    --primary-foreground: 0 0% 100%;
    --secondary: 0 0% 12%;
    --secondary-foreground: 0 0% 90%;
    --muted: 0 0% 11%;
    --muted-foreground: 0 0% 45%;
    --accent: 0 0% 12%;
    --accent-foreground: 0 0% 95%;
    --destructive: 4 100% 59%;
    --destructive-foreground: 0 0% 100%;
    --border: 0 0% 11%;
    --input: 0 0% 14%;
    --ring: 211 100% 50%;
    --radius: 0.75rem;

    /* macOS System Colors (Dark Mode) */
    --system-blue: #0A84FF;
    --system-gray-1: #1C1C1E;
    --system-gray-2: #2C2C2E;
    --system-gray-3: #3A3A3C;
    --system-gray-4: #48484A;
    --system-gray-5: #636366;
    --system-gray-6: #8E8E93;
    
    /* Semantic Colors */
    --bg-sidebar: rgba(28, 28, 30, 0.6); /* Translucent Sidebar */
    --bg-content: rgba(20, 20, 20, 0.95); /* Mostly Opaque Content */
    --border-subtle: rgba(255, 255, 255, 0.08);
    --border-strong: rgba(255, 255, 255, 0.12);

    /* Glass material tokens (Refined) */
    --glass-bg: var(--system-gray-1);
    --glass-bg-hover: var(--system-gray-2);
    --glass-bg-active: var(--system-gray-3);
    --glass-border: var(--border-subtle);
    --glass-border-strong: var(--border-strong);
    --glass-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    --glass-shadow-lg: 0 12px 32px rgba(0, 0, 0, 0.3);
    --glass-content-bg: var(--bg-content);

    /* 커스텀 앱 색상 변수 */
    --background-hex: #000000;
    --background-secondary: #1c1c1e;
    --foreground-hex: #ffffff;
    --border-hex: #3a3a3c;

    /* 컨테이너 상태 색상 - Apple System Colors */
    --status-running: #30D158;
    --status-stopped: #8E8E93;
    --status-error: #FF453A;
    --status-paused: #FF9F0A;
    --status-restarting: #0A84FF;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-transparent text-foreground font-sans antialiased;
    /* macOS 드래그 영역을 위한 기본 설정 */
    -webkit-user-select: none;
    user-select: none;
    /* SF Pro 폰트 스무딩 */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* 텍스트 선택 허용 영역 */
  .selectable {
    -webkit-user-select: text;
    user-select: text;
  }

  /* Electron 타이틀바 드래그 영역 */
  .drag-region {
    -webkit-app-region: drag;
  }

  .no-drag {
    -webkit-app-region: no-drag;
  }
}

/* 스크롤바 스타일링 */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.12);
  border-radius: 9999px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.2);
}

/* 선택 영역 스타일링 */
::selection {
  @apply bg-accent/30;
}

/* 포커스 아웃라인 스타일 */
@layer utilities {
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background;
  }

  .focus-visible-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background;
  }

  /* Glass material utilities (translucent) */
  .glass-panel {
    background: rgba(30, 30, 30, 0.5);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid var(--border-subtle);
    border-radius: 12px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }
  .glass-panel:hover {
    background: rgba(40, 40, 40, 0.5);
    border-color: var(--border-strong);
  }

  .glass-surface {
    background: rgba(44, 44, 46, 0.4); /* system-gray-2 with opacity */
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid var(--border-subtle);
    border-radius: 10px;
  }

  .glass-sidebar {
    background: var(--bg-sidebar);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-right: 1px solid var(--border-subtle);
  }

  .glass-titlebar {
    background: transparent;
  }

  .glass-overlay {
    background: rgba(20, 20, 20, 0.8);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid var(--border-subtle);
  }

  .glass-content {
    background: var(--bg-content);
    /* Content area should be readable, less blur needed if opaque, but consistent texture */
  }

  /* macOS Style Utilities */
  .mac-sidebar-item {
    @apply flex items-center w-full px-3 py-1.5 text-sm font-medium rounded-md transition-all duration-200;
    color: var(--system-gray-6); /* Inactive text */
  }
  .mac-sidebar-item:hover {
    background-color: rgba(255, 255, 255, 0.05);
    color: white;
  }
  .mac-sidebar-item.active {
    background-color: var(--system-blue);
    color: white;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }
  
  .mac-input {
    @apply bg-white/5 border border-white/10 rounded-lg px-3 py-1.5 text-sm transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50;
  }

  .mac-card {
    @apply rounded-xl border border-white/5 bg-[#1C1C1E] shadow-sm transition-all hover:bg-[#2C2C2E] hover:border-white/10;
  }
}

/* 상태 표시 도트 애니메이션 */
@keyframes status-pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.status-dot-animate {
  animation: status-pulse 2s ease-in-out infinite;
}

/* 터미널/로그 뷰어 스타일 */
.terminal-container {
  @apply font-mono text-sm rounded-lg;
  background: #0a0c10;
}

.log-line {
  @apply font-mono text-xs leading-relaxed whitespace-pre-wrap break-all;
}

/* 카드 hover 효과 */
.card-interactive {
  @apply transition-colors duration-150 hover:bg-surface-hover cursor-pointer;
}

/* 버튼 로딩 상태 */
.btn-loading {
  @apply relative pointer-events-none;
}

.btn-loading::after {
  content: '';
  @apply absolute inset-0 flex items-center justify-center;
}
